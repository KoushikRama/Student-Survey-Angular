<!-- Team:
1. Koushik Rama(G01508456)
2. Abhijith Devulapally(G01520039) -->
<!-- This is the survey list page, the surveys aare loaded from MySQL database and are listed in a tabular form -->
<div class="my-container">

  <h1 class="mb-3">All Student Surveys</h1>
  <div *ngIf="loading" class="alert alert-info mt-3">
    Loading surveys...
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger mt-3">
    {{ errorMessage }}
  </div>

  <div *ngIf="!loading && !errorMessage && surveys.length === 0"
       class="alert alert-warning mt-3">
    No surveys found.
  </div>

  <div *ngIf="!loading && surveys.length > 0" class="card shadow-sm mt-3">

    <div class="card-header table-header text-white">
      <h5 class="mb-0">Survey Records</h5>
    </div>

    <div class="table-responsive">
      <table class="table survey-table align-middle mb-0">

        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email / Phone</th>
            <th>Location</th>
            <th>Date</th>
            <th>Liked Most</th>
            <th>Interested In</th>
            <th>Recommend</th>
            <th>Comments</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let s of surveys; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ s.firstName }} {{ s.lastName }}</td>
            <td>
              <div><strong>Email:</strong> {{ s.email }}</div>
              <div><strong>Phone:</strong> {{ s.telephone }}</div>
            </td>
            <td>{{ s.city }}, {{ s.state }}</td>
            <td>{{ s.dateOfSurvey }}</td>
            <td>{{ s.likedMost }}</td>
            <td>{{ s.interestedIn }}</td>
            <td>{{ s.recommendation }}</td>
            <td class="text-break">{{ s.comments }}</td>

            <td class="text-center">
              <button class="action-btn edit-btn" (click)="onEdit(s.id)">
                ‚úèÔ∏è Edit
              </button>
              <button class="action-btn delete-btn" (click)="onDelete(s.id)">
                üóëÔ∏è Delete
              </button>
            </td>
          </tr>
        </tbody>

      </table>
    </div>

  </div>

</div>
